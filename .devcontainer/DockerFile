FROM ubuntu:22.04

# Install Chromium + lightweight X11 desktop tools + VNC + noVNC
RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y \
    tigervnc-standalone-server tigervnc-common \
    novnc websockify \
    chromium-browser \
    openbox pcmanfm lxterminal \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Link index.html â†’ noVNC entrypoint
RUN ln -s /usr/share/novnc/vnc.html /app/index.html

COPY startup.sh /app/startup.sh
RUN chmod +x /app/startup.sh

EXPOSE 6080
CMD ["/app/startup.sh"]
